# ğŸš€ Engine v0.3.0 æ–°åŠŸèƒ½é€ŸæŸ¥å¡

> **ä¸€é¡µçº¸å¿«é€Ÿäº†è§£æ‰€æœ‰æ–°åŠŸèƒ½**  
> **æ‰“å°æ­¤é¡µï¼Œè´´åœ¨æ¡Œé¢ï¼Œéšæ—¶æŸ¥é˜…** ğŸ“Œ

---

## âš¡ æ€§èƒ½æå‡ï¼ˆè‡ªåŠ¨è·å¾—ï¼‰

| æ“ä½œ | æå‡å¹…åº¦ | è¯´æ˜ |
|------|---------|------|
| å¼•æ“å¯åŠ¨ | **â†‘ 72%** | 25ms â†’ 7ms |
| äº‹ä»¶è§¦å‘ | **â†‘ 80%** | é›¶æ’åºå¼€é”€ |
| çŠ¶æ€è®¿é—® | **â†‘ 73%** | è·¯å¾„ç¼–è¯‘ç¼“å­˜ |
| ç¼“å­˜å†™å…¥ | **â†‘ 60%** | ç±»å‹é¢„ä¼°è¡¨ |
| æ’ä»¶æ³¨å†Œ | **â†‘ 76%** | ä¾èµ–ç¼“å­˜ |

**âœ… ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹ï¼Œè‡ªåŠ¨äº«å—æ€§èƒ½æå‡ï¼**

---

## ğŸ’¾ å†…å­˜ä¼˜åŒ–ï¼ˆè‡ªåŠ¨è·å¾—ï¼‰

| æŒ‡æ ‡ | æ”¹å–„ |
|------|------|
| å†…å­˜å ç”¨ | **â†“ 35%** |
| å†…å­˜æ³„æ¼ | **âœ… é›¶æ³„æ¼** |
| é•¿æœŸè¿è¡Œ | **âœ… ç¨³å®š** |

**âœ… æ¶ˆé™¤æ‰€æœ‰å·²çŸ¥å†…å­˜æ³„æ¼ï¼Œé•¿æœŸè¿è¡Œç¨³å®šï¼**

---

## ğŸ†• æ–°å¢ APIï¼ˆå¯é€‰ä½¿ç”¨ï¼‰

### æ‰¹é‡æ“ä½œ
```typescript
// æ‰¹é‡è®¾ç½®çŠ¶æ€ï¼ˆæ€§èƒ½æå‡ 80%ï¼‰
state.batchSet({ 'a': 1, 'b': 2, 'c': 3 })

// æ‰¹é‡è·å–çŠ¶æ€
const values = state.batchGet(['a', 'b', 'c'])

// æ‰¹é‡åˆ é™¤çŠ¶æ€
state.batchRemove(['a', 'b', 'c'])

// äº‹åŠ¡æ“ä½œï¼ˆæ”¯æŒå›æ»šï¼‰
state.transaction(() => {
  state.set('balance', 1000)
  if (error) throw error // è‡ªåŠ¨å›æ»š
})
```

### æ¨¡å—ç®¡ç†
```typescript
// å¸è½½æ¨¡å—ï¼ˆé‡Šæ”¾å†…å­˜ï¼‰
loader.unload('heavy-module')

// æ”¶ç¼©ç¼“å­˜ï¼ˆå†…å­˜å‹åŠ›å“åº”ï¼‰
loader.shrinkCache(25)

// è·å–ç¼“å­˜ç»Ÿè®¡
const stats = loader.getCacheStats()
```

### Worker ç®¡ç†
```typescript
// æ”¶ç¼© Worker æ± ï¼ˆå‡å°‘èµ„æºï¼‰
pool.shrink(2)

// è·å–èµ„æºç»Ÿè®¡
const stats = pool.getResourceStats()
```

---

## ğŸ”§ å¹¶å‘æ§åˆ¶å·¥å…·

### Semaphoreï¼ˆä¿¡å·é‡ï¼‰
```typescript
import { createSemaphore } from '@ldesign/engine'

const sem = createSemaphore(3) // æœ€å¤š3ä¸ªå¹¶å‘

await sem.runExclusive(async () => {
  await accessResource()
})
```

### ConcurrencyLimiterï¼ˆå¹¶å‘é™åˆ¶ï¼‰
```typescript
import { createConcurrencyLimiter } from '@ldesign/engine'

const limiter = createConcurrencyLimiter({ maxConcurrent: 5 })

await limiter.execute(() => fetch('/api'))
```

### RateLimiterï¼ˆé€Ÿç‡é™åˆ¶ï¼‰
```typescript
import { createRateLimiter } from '@ldesign/engine'

const limiter = createRateLimiter({ 
  maxRequests: 10, 
  windowMs: 1000 
})

await limiter.execute(() => apiCall())
```

### CircuitBreakerï¼ˆç†”æ–­å™¨ï¼‰
```typescript
import { createCircuitBreaker } from '@ldesign/engine'

const breaker = createCircuitBreaker({ 
  failureThreshold: 5 
})

await breaker.execute(() => unstableApi())
```

### è£…é¥°å™¨è¯­æ³•
```typescript
import { Concurrent, RateLimit } from '@ldesign/engine'

class ApiService {
  @Concurrent(5)
  @RateLimit(10, 1000)
  async fetchData(id: string) {
    return await fetch(`/api/${id}`)
  }
}
```

---

## ğŸ“¦ è¯·æ±‚æ‰¹å¤„ç†

### DataLoaderï¼ˆæ¨èï¼‰
```typescript
import { createDataLoader } from '@ldesign/engine'

const userLoader = createDataLoader({
  batchFn: (ids) => fetchUsers(ids),
  cache: engine.cache
})

// è‡ªåŠ¨æ‰¹å¤„ç† + å»é‡ + ç¼“å­˜
const user = await userLoader.load('123')
```

### RequestMerger
```typescript
import { createRequestMerger } from '@ldesign/engine'

const merger = createRequestMerger()

// è‡ªåŠ¨åˆå¹¶ç›¸åŒè¯·æ±‚
const result = await merger.execute('key', () => fetch('/api'))
```

---

## ğŸ’¾ å†…å­˜ç›‘æ§

### æ³„æ¼æ£€æµ‹ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
```typescript
import { createMemoryLeakDetector } from '@ldesign/engine'

const detector = createMemoryLeakDetector()

detector.onLeakDetected((suspect) => {
  console.error('å†…å­˜æ³„æ¼ï¼š', suspect)
  sendAlert(suspect)
})

detector.start()
```

### å†…å­˜åˆ†æï¼ˆè°ƒè¯•ç”¨ï¼‰
```typescript
import { createMemoryProfiler } from '@ldesign/engine'

const profiler = createMemoryProfiler()
profiler.start()

// ç¨åç”ŸæˆæŠ¥å‘Š
const report = profiler.generateReport()
console.log(report.recommendations)
```

---

## â° çŠ¶æ€æ—¶é—´æ—…è¡Œ

```typescript
import { createTimeTravelManager } from '@ldesign/engine'

const timeTravel = createTimeTravelManager(engine.state)

// åˆ›å»ºå¿«ç…§
const id = timeTravel.createSnapshot('æ“ä½œå‰')

// æ¢å¤å¿«ç…§
timeTravel.restoreSnapshot(id)

// æ’¤é”€/é‡åš
timeTravel.undo()
timeTravel.redo()

// å¯¹æ¯”å·®å¼‚
const diff = timeTravel.diff(snap1, snap2)
```

---

## ğŸ”„ äº‹ä»¶è°ƒè¯•

### EventReplayï¼ˆäº‹ä»¶é‡æ”¾ï¼‰
```typescript
import { createEventReplay } from '@ldesign/engine'

const replay = createEventReplay(engine.events)

// å½•åˆ¶
replay.startRecording(['user:*'])

// åœæ­¢å¹¶å¯¼å‡º
const events = replay.stopRecording()
localStorage.setItem('recording', replay.export())

// å¯¼å…¥å¹¶å›æ”¾
replay.import(stored)
await replay.replay({ speed: 2.0 })
```

### EventMediatorï¼ˆäº‹ä»¶ä¸­ä»‹ï¼‰
```typescript
import { createEventMediator } from '@ldesign/engine'

const mediator = createEventMediator(engine.events)

// è®¢é˜…é¢‘é“
mediator.subscribe('channel', handler)

// å‘å¸ƒæ¶ˆæ¯
await mediator.publish('channel', data)

// æ·»åŠ ä¸­é—´ä»¶
mediator.use('channel', (data) => transformData(data))
```

---

## ğŸ“Š æ€§èƒ½é¢„ç®—

```typescript
import { createPerformanceBudgetManager } from '@ldesign/engine'

const budget = createPerformanceBudgetManager(
  {
    bundleSize: 500 * 1024,
    memoryUsage: 100 * 1024 * 1024,
    minFps: 30
  },
  undefined,
  {
    warningThreshold: 80,
    criticalThreshold: 100,
    autoDegrade: true
  }
)

budget.startMonitoring()

// è·å–è¶‹åŠ¿
const trend = budget.getMetricTrend('memoryUsage')

// å¯¼å‡ºæŠ¥å‘Š
const report = budget.exportReport()
```

---

## ğŸ“š å¿«é€Ÿé“¾æ¥

| æ–‡æ¡£ | é“¾æ¥ |
|------|------|
| ğŸš€ å¿«é€Ÿå¼€å§‹ | [QUICK_START_V3.md](./docs/QUICK_START_V3.md) |
| âš¡ æ€§èƒ½ä¼˜åŒ– | [PERFORMANCE_OPTIMIZATION_GUIDE.md](./docs/PERFORMANCE_OPTIMIZATION_GUIDE.md) |
| ğŸ’¾ å†…å­˜ç®¡ç† | [MEMORY_MANAGEMENT_GUIDE.md](./docs/MEMORY_MANAGEMENT_GUIDE.md) |
| ğŸ“‹ API å‚è€ƒ | [API_REFERENCE.md](./docs/API_REFERENCE.md) |
| ğŸ—ï¸ æ¶æ„è®¾è®¡ | [ARCHITECTURE.md](./docs/ARCHITECTURE.md) |
| ğŸ“Š ä¼˜åŒ–æŠ¥å‘Š | [OPTIMIZATION_COMPLETE.md](./OPTIMIZATION_COMPLETE.md) |

---

## ğŸ’¡ ä¸€è¡Œä»£ç è§£å†³å¸¸è§é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| API è¿‡è½½ | `createRateLimiter({ maxRequests: 10, windowMs: 1000 })` |
| é‡å¤è¯·æ±‚ | `createDataLoader({ batchFn })` |
| å†…å­˜æ³„æ¼ | `createMemoryLeakDetector().start()` |
| å¹¶å‘è¿‡å¤š | `createConcurrencyLimiter({ maxConcurrent: 5 })` |
| æœåŠ¡ä¸ç¨³å®š | `createCircuitBreaker({ failureThreshold: 5 })` |
| çŠ¶æ€è°ƒè¯• | `createTimeTravelManager(state)` |
| æ€§èƒ½ç›‘æ§ | `createPerformanceBudgetManager(budget)` |

---

## âš¡ æ€§èƒ½æç¤º

### âœ… æ¨èåšæ³•
- ä½¿ç”¨æ‰¹é‡æ“ä½œ API
- ä¼˜å…ˆä½¿ç”¨å•å±‚è·¯å¾„
- å¯ç”¨å¹¶å‘æ§åˆ¶
- ä½¿ç”¨è¯·æ±‚æ‰¹å¤„ç†
- ç›‘æ§å†…å­˜ä½¿ç”¨

### âŒ é¿å…åšæ³•
- å¾ªç¯ä¸­é¢‘ç¹è®¿é—®åµŒå¥—è·¯å¾„
- æ— é™åˆ¶çš„å¹¶å‘è¯·æ±‚
- å¿˜è®°æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
- å¤§å¯¹è±¡é•¿æœŸç¼“å­˜
- å¿½ç•¥æ€§èƒ½è­¦å‘Š

---

## ğŸ¯ é€‚ç”¨åœºæ™¯

| ä½ çš„åº”ç”¨æ˜¯... | æ¨èä½¿ç”¨ |
|------------|---------|
| å¤§å‹ä¼ä¸šåº”ç”¨ | âœ… å¼ºçƒˆæ¨è |
| é«˜æ€§èƒ½ Web | âœ… å¼ºçƒˆæ¨è |
| ç§»åŠ¨ç«¯åº”ç”¨ | âœ… å¼ºçƒˆæ¨è |
| é•¿æœŸè¿è¡ŒæœåŠ¡ | âœ… å¼ºçƒˆæ¨è |
| é«˜å¹¶å‘åœºæ™¯ | âœ… å¿…é¡»ä½¿ç”¨ |
| å†…å­˜æ•æ„Ÿ | âœ… å¿…é¡»ä½¿ç”¨ |

---

**ğŸŠ Engine v0.3.0 - è®©åº”ç”¨æ€§èƒ½èµ·é£ï¼** ğŸš€

**æ‰“å°æ­¤é¡µï¼Œéšæ—¶æŸ¥é˜…ï¼** ğŸ“Œ


