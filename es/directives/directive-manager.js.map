{"version":3,"file":"directive-manager.js","sources":["../../src/directives/directive-manager.ts"],"sourcesContent":["import type { DirectiveManager, DirectiveValidationResult, EngineDirective, Logger, VueDirectiveBinding } from '../types'\nimport { createHybridDirectiveAdapter } from './utils/directive-compatibility'\n\nexport class DirectiveManagerImpl implements DirectiveManager {\n  private directives = new Map<string, EngineDirective>()\n  private logger?: Logger\n\n  constructor(logger?: Logger) {\n    this.logger = logger\n    // logger参数保留用于未来扩展\n  }\n\n  register(name: string, directive: unknown): void {\n    if (this.directives.has(name)) {\n      this.logger?.warn(\n        `Directive \"${name}\" is already registered. It will be replaced.`\n      )\n    }\n\n    // 使用兼容性工具转换指令\n    const engineDirective = createHybridDirectiveAdapter(directive)\n    this.directives.set(name, engineDirective)\n    this.logger?.debug(`Directive \"${name}\" registered`)\n  }\n\n  unregister(name: string): void {\n    this.directives.delete(name)\n  }\n\n  get(name: string): EngineDirective | undefined {\n    return this.directives.get(name)\n  }\n\n  getAll(): EngineDirective[] {\n    return Array.from(this.directives.values())\n  }\n\n  // 检查指令是否存在\n  has(name: string): boolean {\n    return this.directives.has(name)\n  }\n\n  // 获取所有指令名称\n  getNames(): string[] {\n    return Array.from(this.directives.keys())\n  }\n\n  // 获取指令数量\n  size(): number {\n    return this.directives.size\n  }\n\n  // 清空所有指令\n  clear(): void {\n    this.directives.clear()\n  }\n\n  // 销毁指令管理器，清理资源\n  destroy(): void {\n    this.clear()\n    this.logger = undefined\n  }\n\n  // 批量注册指令\n  registerBatch(directives: Record<string, unknown>): void {\n    for (const [name, directive] of Object.entries(directives)) {\n      this.register(name, directive)\n    }\n  }\n\n  // 批量卸载指令\n  unregisterBatch(names: string[]): void {\n    for (const name of names) {\n      this.unregister(name)\n    }\n  }\n\n  // 按分类获取指令\n  getByCategory(category: string): EngineDirective[] {\n    return Array.from(this.directives.values()).filter(\n      directive => directive.category === category\n    )\n  }\n\n  // 按标签获取指令\n  getByTag(tag: string): EngineDirective[] {\n    return Array.from(this.directives.values()).filter(directive =>\n      directive.tags?.includes(tag)\n    )\n  }\n\n  // 启用指令\n  enable(name: string): void {\n    const directive = this.directives.get(name)\n    if (directive) {\n      // 指令启用逻辑\n      this.logger?.debug(`Directive \"${name}\" enabled`)\n    }\n  }\n\n  // 禁用指令\n  disable(name: string): void {\n    const directive = this.directives.get(name)\n    if (directive) {\n      // 指令禁用逻辑\n      this.logger?.debug(`Directive \"${name}\" disabled`)\n    }\n  }\n\n  // 重新加载指令\n  reload(name: string): void {\n    const directive = this.directives.get(name)\n    if (directive) {\n      // 指令重新加载逻辑\n      this.logger?.debug(`Directive \"${name}\" reloaded`)\n    }\n  }\n\n  // 验证指令\n  validate(_directive: EngineDirective | unknown): DirectiveValidationResult {\n    return {\n      isValid: true,\n      errors: [],\n      warnings: [],\n      suggestions: [],\n    }\n  }\n}\n\nexport function createDirectiveManager(logger?: Logger): DirectiveManager {\n  return new DirectiveManagerImpl(logger)\n}\n\n// 预定义的常用指令\nexport const commonDirectives = {\n  // 点击外部区域指令\n  clickOutside: {\n    mounted(el: HTMLElement, binding: VueDirectiveBinding) {\n      type ClickEl = HTMLElement & { _clickOutsideHandler?: (event: Event) => void }\n      const elWith = el as ClickEl\n      elWith._clickOutsideHandler = (event: Event) => {\n        if (!(el === event.target || el.contains(event.target as Node))) {\n          const handler = binding.value as ((e: Event) => void) | undefined\n          if (typeof handler === 'function') handler(event)\n        }\n      }\n      document.addEventListener('click', elWith._clickOutsideHandler as (e: Event) => void)\n    },\n    unmounted(el: HTMLElement) {\n      type ClickEl = HTMLElement & { _clickOutsideHandler?: (event: Event) => void }\n      const elWith = el as ClickEl\n      if (elWith._clickOutsideHandler) {\n        document.removeEventListener('click', elWith._clickOutsideHandler)\n        delete elWith._clickOutsideHandler\n      }\n    },\n  } as unknown,\n\n  // 复制到剪贴板指令\n  copy: {\n    mounted(el: HTMLElement, binding: VueDirectiveBinding) {\n      interface CopyBindingValue { text?: string; target?: string; callback?: (payload: unknown) => void }\n      type CopyEl = HTMLElement & { _copyHandler?: () => void }\n      const elWith = el as CopyEl\n      elWith._copyHandler = async () => {\n        try {\n          const val = binding.value as CopyBindingValue | string | undefined\n          const text = typeof val === 'string' ? val : val?.text ?? el.textContent ?? ''\n          await navigator.clipboard.writeText(text)\n\n          const cb = (typeof val === 'object' && val && typeof val.callback === 'function') ? val.callback : undefined\n          if (binding.arg === 'success' && cb) {\n            cb(text)\n          }\n\n          // 添加成功样式\n          el.classList.add('copy-success')\n          setTimeout(() => {\n            el.classList.remove('copy-success')\n          }, 1000)\n        } catch (error) {\n          console.error('Failed to copy text:', error)\n\n          const val = binding.value as { callback?: (e: unknown) => void } | undefined\n          const cb = val && typeof val.callback === 'function' ? val.callback : undefined\n          if (binding.arg === 'error' && cb) {\n            cb(error)\n          }\n        }\n      }\n\n      el.addEventListener('click', elWith._copyHandler as () => void)\n      el.style.cursor = 'pointer'\n    },\n    unmounted(el: HTMLElement) {\n      type CopyEl = HTMLElement & { _copyHandler?: () => void }\n      const elWith = el as CopyEl\n      if (elWith._copyHandler) {\n        el.removeEventListener('click', elWith._copyHandler)\n        delete elWith._copyHandler\n      }\n    },\n  } as unknown,\n\n  // 懒加载指令\n  lazy: {\n    mounted(el: HTMLElement, binding: VueDirectiveBinding) {\n      interface LazyBindingValue { options?: Record<string, unknown>; callback?: (el: HTMLElement) => void }\n      const val = binding.value as LazyBindingValue | ((el: HTMLElement) => void) | undefined\n      const options = {\n        threshold: 0.1,\n        rootMargin: '50px',\n        ...(typeof val === 'object' && val ? (val.options ?? {}) : {}),\n      }\n\n      type LazyEl = HTMLElement & { _lazyObserver?: IntersectionObserver }\n      const elWith = el as LazyEl\n      elWith._lazyObserver = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            // 执行懒加载回调\n            if (typeof val === 'function') {\n              val(el)\n            } else if (typeof val?.callback === 'function') {\n              val.callback(el)\n            }\n\n            // 停止观察\n            el._lazyObserver?.unobserve(el)\n          }\n        })\n      }, options)\n\n      elWith._lazyObserver.observe(el)\n    },\n    unmounted(el: HTMLElement) {\n      if (el._lazyObserver) {\n        el._lazyObserver.disconnect()\n        delete el._lazyObserver\n      }\n    },\n  } as unknown,\n\n  // 防抖指令\n  debounce: {\n    mounted(el: HTMLElement, binding: VueDirectiveBinding) {\n      interface DebounceValue { delay?: number; callback?: (...args: unknown[]) => void; event?: string }\n      const val = binding.value as DebounceValue | ((...args: unknown[]) => void) | undefined\n      const delay = (typeof val === 'object' && val ? val.delay : undefined) ?? 300\n      const event = binding.arg || (typeof val === 'object' && val ? val.event : undefined) || 'click'\n\n      el._debounceHandler = (...args: unknown[]) => {\n        clearTimeout(el._debounceTimer)\n        el._debounceTimer = window.setTimeout(() => {\n          if (typeof val === 'function') {\n            val(...args)\n          } else if (typeof val?.callback === 'function') {\n            val.callback(...args)\n          }\n        }, delay)\n      }\n\n      el.addEventListener(event, el._debounceHandler)\n    },\n    updated(el: HTMLElement, binding: VueDirectiveBinding) {\n      interface DebounceValue { delay?: number }\n      const val = binding.value as DebounceValue | undefined\n      const delay = (val?.delay ?? 300)\n      el._debounceDelay = delay\n    },\n    unmounted(el: HTMLElement) {\n      if (el._debounceTimer) {\n        clearTimeout(el._debounceTimer)\n      }\n      if (el._debounceHandler) {\n        const event = 'click' // 默认事件，实际应该从绑定中获取\n        el.removeEventListener(event, el._debounceHandler)\n        delete el._debounceHandler\n      }\n    },\n  } as unknown,\n\n  // 节流指令\n  throttle: {\n    mounted(el: HTMLElement, binding: VueDirectiveBinding) {\n      interface ThrottleValue { delay?: number; callback?: (...args: unknown[]) => void; event?: string }\n      const val = binding.value as ThrottleValue | ((...args: unknown[]) => void) | undefined\n      const delay = (typeof val === 'object' && val ? val.delay : undefined) ?? 300\n      const event = binding.arg || (typeof val === 'object' && val ? val.event : undefined) || 'click'\n      let lastTime = 0\n\n      el._throttleHandler = (...args: unknown[]) => {\n        const now = Date.now()\n        if (now - lastTime >= delay) {\n          lastTime = now\n          if (typeof val === 'function') {\n            val(...args)\n          } else if (typeof val?.callback === 'function') {\n            val.callback(...args)\n          }\n        }\n      }\n\n      el.addEventListener(event, el._throttleHandler)\n    },\n    unmounted(el: HTMLElement) {\n      if (el._throttleHandler) {\n        const event = 'click' // 默认事件，实际应该从绑定中获取\n        el.removeEventListener(event, el._throttleHandler)\n        delete el._throttleHandler\n      }\n    },\n  } as unknown,\n\n  // 权限控制指令\n  permission: {\n    mounted(el: HTMLElement, binding: VueDirectiveBinding) {\n      const val = binding.value as string | string[] | undefined\n      const permissions = Array.isArray(val) ? val : [val].filter((v): v is string => typeof v === 'string')\n      const hasPermission = permissions.some((permission: string) => {\n        // 这里应该调用实际的权限检查逻辑\n        return checkPermission(permission)\n      })\n\n      if (!hasPermission) {\n        if (binding.modifiers.hide) {\n          el.style.display = 'none'\n        } else if (binding.modifiers.disable) {\n          el.setAttribute('disabled', 'true')\n          el.style.opacity = '0.5'\n          el.style.pointerEvents = 'none'\n        } else {\n          el.remove()\n        }\n      }\n    },\n  } as unknown,\n\n  // 焦点指令\n  focus: {\n    mounted(el: HTMLElement, binding: VueDirectiveBinding) {\n      if (binding.value !== false) {\n        el.focus()\n      }\n    },\n    updated(el: HTMLElement, binding: VueDirectiveBinding) {\n      if (binding.value && !binding.oldValue) {\n        el.focus()\n      }\n    },\n  } as unknown,\n}\n\n// 权限检查函数（示例实现）\nfunction checkPermission(_permission: string): boolean {\n  // 这里应该实现实际的权限检查逻辑\n  // 例如从用户状态或权限服务中检查\n  return true // 示例：总是返回true\n}\n\n// 扩展HTMLElement类型以支持自定义属性\ndeclare global {\n  interface HTMLElement {\n    _clickOutsideHandler?: (event: Event) => void\n    _copyHandler?: () => void\n    _lazyObserver?: IntersectionObserver\n    _debounceHandler?: EventListener\n    _debounceTimer?: number\n    _debounceDelay?: number\n    _throttleHandler?: EventListener\n  }\n}\n"],"names":[],"mappings":"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"}