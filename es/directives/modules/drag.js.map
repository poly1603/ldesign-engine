{"version":3,"file":"drag.js","sources":["../../../src/directives/modules/drag.ts"],"sourcesContent":["/**\r\n * 拖拽指令\r\n * 使元素可拖拽移动\r\n */\r\n\r\nimport type { VueDirectiveBinding } from '../base/vue-directive-adapter'\r\nimport { DirectiveBase } from '../base/directive-base'\r\nimport { defineDirective, directiveUtils } from '../base/vue-directive-adapter'\r\n\r\nexport interface DragOptions {\r\n  disabled?: boolean\r\n  axis?: 'x' | 'y' | 'both'\r\n  handle?: string | HTMLElement\r\n  constraint?: DragConstraint\r\n  onStart?: (event: DragEvent) => void\r\n  onMove?: (event: DragEvent) => void\r\n  onEnd?: (event: DragEvent) => void\r\n  cursor?: string\r\n  preventDefault?: boolean\r\n  stopPropagation?: boolean\r\n}\r\n\r\nexport interface DragConstraint {\r\n  minX?: number\r\n  maxX?: number\r\n  minY?: number\r\n  maxY?: number\r\n  parent?: boolean\r\n  selector?: string\r\n}\r\n\r\nexport interface DragState {\r\n  isDragging: boolean\r\n  startX: number\r\n  startY: number\r\n  currentX: number\r\n  currentY: number\r\n  offsetX: number\r\n  offsetY: number\r\n}\r\n\r\nexport interface DragEvent {\r\n  el: HTMLElement\r\n  state: DragState\r\n  originalEvent: MouseEvent | TouchEvent\r\n}\r\n\r\nexport class DragDirective extends DirectiveBase {\r\n  constructor() {\r\n    super({\r\n      name: 'drag',\r\n      description: '使元素可拖拽移动',\r\n      version: '1.0.0',\r\n      category: 'interaction',\r\n      tags: ['drag', 'draggable', 'move', 'interaction'],\r\n    })\r\n  }\r\n\r\n  public mounted(el: HTMLElement, binding: VueDirectiveBinding): void {\r\n    const config = this.parseConfig(binding)\r\n\r\n    if (config.disabled) {\r\n      return\r\n    }\r\n\r\n    // Initialize drag state\r\n    const state: DragState = {\r\n      isDragging: false,\r\n      startX: 0,\r\n      startY: 0,\r\n      currentX: 0,\r\n      currentY: 0,\r\n      offsetX: 0,\r\n      offsetY: 0,\r\n    }\r\n\r\n    // Get handle element\r\n    const handle = this.getHandle(el, config.handle)\r\n\r\n    // Set initial position\r\n    if (!el.style.position || el.style.position === 'static') {\r\n      el.style.position = 'relative'\r\n    }\r\n\r\n    // Mouse/Touch event handlers\r\n    const handleStart = (e: MouseEvent | TouchEvent) => {\r\n      if (config.disabled) return\r\n\r\n      state.isDragging = true\r\n\r\n      const point = this.getEventPoint(e)\r\n      state.startX = point.x - state.offsetX\r\n      state.startY = point.y - state.offsetY\r\n\r\n      // Set cursor\r\n      document.body.style.cursor = config.cursor ?? 'move'\r\n      el.style.cursor = config.cursor ?? 'move'\r\n\r\n      // Prevent text selection\r\n      document.body.style.userSelect = 'none'\r\n\r\n      // Call onStart callback\r\n      if (config.onStart) {\r\n        config.onStart({ el, state, originalEvent: e })\r\n      }\r\n\r\n      if (config.preventDefault) e.preventDefault()\r\n      if (config.stopPropagation) e.stopPropagation()\r\n\r\n      this.log('Drag started', state)\r\n    }\r\n\r\n    const handleMove = (e: MouseEvent | TouchEvent) => {\r\n      if (!state.isDragging) return\r\n\r\n      const point = this.getEventPoint(e)\r\n      let newX = point.x - state.startX\r\n      let newY = point.y - state.startY\r\n\r\n      // Apply axis constraints\r\n      if (config.axis === 'x') {\r\n        newY = state.offsetY\r\n      } else if (config.axis === 'y') {\r\n        newX = state.offsetX\r\n      }\r\n\r\n      // Apply boundary constraints\r\n      if (config.constraint) {\r\n        const bounds = this.getConstraintBounds(el, config.constraint)\r\n        newX = Math.max(bounds.minX, Math.min(newX, bounds.maxX))\r\n        newY = Math.max(bounds.minY, Math.min(newY, bounds.maxY))\r\n      }\r\n\r\n      state.currentX = newX\r\n      state.currentY = newY\r\n      state.offsetX = newX\r\n      state.offsetY = newY\r\n\r\n      // Apply transform\r\n      el.style.transform = `translate(${newX}px, ${newY}px)`\r\n\r\n      // Call onMove callback\r\n      if (config.onMove) {\r\n        config.onMove({ el, state, originalEvent: e })\r\n      }\r\n\r\n      if (config.preventDefault) e.preventDefault()\r\n      if (config.stopPropagation) e.stopPropagation()\r\n    }\r\n\r\n    const handleEnd = (e: MouseEvent | TouchEvent) => {\r\n      if (!state.isDragging) return\r\n\r\n      state.isDragging = false\r\n\r\n      // Reset cursor\r\n      document.body.style.cursor = ''\r\n      el.style.cursor = ''\r\n      document.body.style.userSelect = ''\r\n\r\n      // Call onEnd callback\r\n      if (config.onEnd) {\r\n        config.onEnd({ el, state, originalEvent: e })\r\n      }\r\n\r\n      this.log('Drag ended', state)\r\n    }\r\n\r\n    // Store handlers for cleanup\r\n    const handlers = { handleStart, handleMove, handleEnd }\r\n    directiveUtils.storeData(el, 'drag-handlers', handlers)\r\n    directiveUtils.storeData(el, 'drag-state', state)\r\n    directiveUtils.storeData(el, 'drag-handle', handle)\r\n\r\n    // Add event listeners\r\n    handle.addEventListener('mousedown', handleStart)\r\n    handle.addEventListener('touchstart', handleStart, { passive: !config.preventDefault })\r\n\r\n    document.addEventListener('mousemove', handleMove)\r\n    document.addEventListener('touchmove', handleMove, { passive: !config.preventDefault })\r\n\r\n    document.addEventListener('mouseup', handleEnd)\r\n    document.addEventListener('touchend', handleEnd)\r\n\r\n    // Set handle cursor\r\n    handle.style.cursor = config.cursor ?? 'move'\r\n\r\n    this.log(`Drag directive mounted on element`, el)\r\n  }\r\n\r\n  public updated(el: HTMLElement, binding: VueDirectiveBinding): void {\r\n    // Clean up old handlers\r\n    this.cleanup(el)\r\n\r\n    // Re-mount with new config\r\n    this.mounted(el, binding)\r\n\r\n    this.log(`Drag directive updated on element`, el)\r\n  }\r\n\r\n  public unmounted(el: HTMLElement): void {\r\n    this.cleanup(el)\r\n    this.log(`Drag directive unmounted from element`, el)\r\n  }\r\n\r\n  private cleanup(el: HTMLElement): void {\r\n    const handlers = directiveUtils.getData(el, 'drag-handlers') as {\r\n      handleStart: EventListener\r\n      handleMove: EventListener\r\n      handleEnd: EventListener\r\n    } | undefined\r\n    const handle = directiveUtils.getData(el, 'drag-handle') as HTMLElement\r\n    const state = directiveUtils.getData(el, 'drag-state') as DragState | undefined\r\n\r\n    // 如果正在拖拽，重置状态\r\n    if (state && state.isDragging) {\r\n      state.isDragging = false\r\n      document.body.style.cursor = ''\r\n      document.body.style.userSelect = ''\r\n      if (el) {\r\n        el.style.cursor = ''\r\n      }\r\n    }\r\n\r\n    // 移除所有事件监听器\r\n    if (handlers && handle) {\r\n      handle.removeEventListener('mousedown', handlers.handleStart)\r\n      handle.removeEventListener('touchstart', handlers.handleStart)\r\n\r\n      document.removeEventListener('mousemove', handlers.handleMove)\r\n      document.removeEventListener('touchmove', handlers.handleMove)\r\n\r\n      document.removeEventListener('mouseup', handlers.handleEnd)\r\n      document.removeEventListener('touchend', handlers.handleEnd)\r\n    }\r\n\r\n    // 清理存储的数据\r\n    directiveUtils.removeData(el, 'drag-handlers')\r\n    directiveUtils.removeData(el, 'drag-state')\r\n    directiveUtils.removeData(el, 'drag-handle')\r\n    \r\n    // 清理元素引用\r\n    if (el && typeof el === 'object') {\r\n      ;(el as any).__dragState = null\r\n      ;(el as any).__dragHandlers = null\r\n    }\r\n  }\r\n\r\n  private getHandle(el: HTMLElement, handle?: string | HTMLElement): HTMLElement {\r\n    if (!handle) {\r\n      return el\r\n    }\r\n\r\n    if (typeof handle === 'string') {\r\n      const handleEl = el.querySelector(handle) as HTMLElement\r\n      return handleEl || el\r\n    }\r\n\r\n    return handle\r\n  }\r\n\r\n  private getEventPoint(e: MouseEvent | TouchEvent): { x: number; y: number } {\r\n    if ('touches' in e && e.touches.length > 0) {\r\n      return { x: e.touches[0].clientX, y: e.touches[0].clientY }\r\n    }\r\n    return { x: (e as MouseEvent).clientX, y: (e as MouseEvent).clientY }\r\n  }\r\n\r\n  private getConstraintBounds(el: HTMLElement, constraint: DragConstraint) {\r\n    let minX = constraint.minX ?? -Infinity\r\n    let maxX = constraint.maxX ?? Infinity\r\n    let minY = constraint.minY ?? -Infinity\r\n    let maxY = constraint.maxY ?? Infinity\r\n\r\n    if (constraint.parent && el.parentElement) {\r\n      const parent = el.parentElement\r\n      const parentRect = parent.getBoundingClientRect()\r\n      const elRect = el.getBoundingClientRect()\r\n\r\n      minX = 0\r\n      maxX = parentRect.width - elRect.width\r\n      minY = 0\r\n      maxY = parentRect.height - elRect.height\r\n    }\r\n\r\n    if (constraint.selector) {\r\n      const container = document.querySelector(constraint.selector) as HTMLElement\r\n      if (container) {\r\n        const containerRect = container.getBoundingClientRect()\r\n        const elRect = el.getBoundingClientRect()\r\n\r\n        minX = containerRect.left - elRect.left\r\n        maxX = containerRect.right - elRect.right\r\n        minY = containerRect.top - elRect.top\r\n        maxY = containerRect.bottom - elRect.bottom\r\n      }\r\n    }\r\n\r\n    return { minX, maxX, minY, maxY }\r\n  }\r\n\r\n  private parseConfig(binding: VueDirectiveBinding): DragOptions {\r\n    const value = binding.value\r\n\r\n    if (typeof value === 'boolean') {\r\n      return { disabled: !value }\r\n    }\r\n\r\n    if (typeof value === 'object' && value !== null) {\r\n      return value as DragOptions\r\n    }\r\n\r\n    return {}\r\n  }\r\n\r\n  public getExample(): string {\r\n    return `\r\n<!-- Basic draggable element -->\r\n<div v-drag class=\"draggable-box\">\r\n  Drag me!\r\n</div>\r\n\r\n<!-- Axis constraint -->\r\n<div v-drag=\"{ axis: 'x' }\" class=\"slider\">\r\n  Horizontal only\r\n</div>\r\n\r\n<div v-drag=\"{ axis: 'y' }\" class=\"slider\">\r\n  Vertical only\r\n</div>\r\n\r\n<!-- With handle -->\r\n<div v-drag=\"{ handle: '.handle' }\" class=\"panel\">\r\n  <div class=\"handle\">⋮⋮ Drag Handle</div>\r\n  <div class=\"content\">Panel content</div>\r\n</div>\r\n\r\n<!-- Boundary constraints -->\r\n<div v-drag=\"{\r\n  constraint: {\r\n    parent: true\r\n  }\r\n}\" class=\"bounded-box\">\r\n  Constrained to parent\r\n</div>\r\n\r\n<!-- With callbacks -->\r\n<div v-drag=\"{\r\n  onStart: (e) => ,\r\n  onMove: (e) => updatePosition(e),\r\n  onEnd: (e) => savePosition(e)\r\n}\" class=\"tracked-box\">\r\n  Tracked dragging\r\n</div>\r\n\r\n<!-- Custom constraints -->\r\n<div v-drag=\"{\r\n  constraint: {\r\n    minX: 0,\r\n    maxX: 500,\r\n    minY: 0,\r\n    maxY: 300\r\n  }\r\n}\" class=\"limited-box\">\r\n  Limited range\r\n</div>\r\n\r\n<style>\r\n.draggable-box {\r\n  width: 100px;\r\n  height: 100px;\r\n  background: #3498db;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 8px;\r\n}\r\n\r\n.handle {\r\n  background: #2c3e50;\r\n  color: white;\r\n  padding: 8px;\r\n  cursor: move;\r\n}\r\n</style>\r\n    `\r\n  }\r\n}\r\n\r\n// Export the directive definition\r\nexport const vDrag = defineDirective(new DragDirective())\r\n\r\n// Export default for convenience\r\nexport default vDrag\r\n"],"names":[],"mappings":"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"}