# Engine åŒ…å½“å‰çŠ¶æ€æŠ¥å‘Š

**æ›´æ–°æ—¶é—´**: 2025-11-03  
**çŠ¶æ€**: éƒ¨åˆ†å®Œæˆ

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ä»£ç ç»“æ„åˆ†æ
- âœ… å®Œæˆäº†å¯¹ `packages/engine/` ç›®å½•çš„å…¨é¢åˆ†æ
- âœ… è¯†åˆ«äº†æ‰€æœ‰15ä¸ªæ¡†æ¶é€‚é…åŒ…çš„çŠ¶æ€
- âœ… åˆ†æäº†æ ¸å¿ƒåŒ…çš„æ¶æ„è®¾è®¡
- âœ… æ£€æŸ¥äº†APIä¸€è‡´æ€§

### 2. é—®é¢˜è¯†åˆ«
- âœ… è¯†åˆ«å‡º6ä¸ªç¼ºå°‘æºä»£ç çš„æ¡†æ¶é€‚é…åŒ…
- âœ… å‘ç°ç‰ˆæœ¬å·ä¸ç»Ÿä¸€çš„é—®é¢˜
- âœ… å‘ç°æ„å»ºå·¥å…·ä¸ç»Ÿä¸€çš„é—®é¢˜
- âœ… å‘ç°æ–‡æ¡£è¿‡å¤šä¸”é‡å¤çš„é—®é¢˜

### 3. ç‰ˆæœ¬å·ç»Ÿä¸€
- âœ… å°† `@ldesign/engine-core` ä» 0.1.0 å‡çº§åˆ° 0.2.0
- âœ… å°† `@ldesign/engine-preact` ä» 0.1.0 å‡çº§åˆ° 0.2.0
- âœ… å°† `@ldesign/engine-lit` ä» 0.1.0 å‡çº§åˆ° 0.2.0
- âœ… å°† `@ldesign/engine-qwik` ä» 0.1.0 å‡çº§åˆ° 0.2.0

### 4. ä¾èµ–æ¸…ç†
- âœ… ä»ä¸»åŒ… `@ldesign/engine` ä¸­ç§»é™¤äº†6ä¸ªç¼ºå°‘æºä»£ç çš„åŒ…çš„ä¾èµ–:
  - `@ldesign/engine-alpinejs`
  - `@ldesign/engine-astro`
  - `@ldesign/engine-nextjs`
  - `@ldesign/engine-nuxtjs`
  - `@ldesign/engine-remix`
  - `@ldesign/engine-sveltekit`

### 5. æ–‡æ¡£ç”Ÿæˆ
- âœ… ç”Ÿæˆäº†è¯¦ç»†çš„åˆ†ææŠ¥å‘Š (`ENGINE_ANALYSIS_REPORT.md`)
- âœ… ç”Ÿæˆäº†é—®é¢˜æ¸…å•å’Œä¿®å¤æ–¹æ¡ˆ (`ISSUES_AND_FIXES.md`)
- âœ… ç”Ÿæˆäº†å½“å‰çŠ¶æ€æŠ¥å‘Š (æœ¬æ–‡æ¡£)

---

## âŒ ä»ç„¶å­˜åœ¨çš„é—®é¢˜

### 1. æ„å»ºå¤±è´¥ (ä¸¥é‡)

**é—®é¢˜**: alpinejs å’Œ astro åŒ…ä»ç„¶åœ¨æ„å»ºæ—¶å¤±è´¥

**åŸå› **: è¿™ä¸¤ä¸ªåŒ…ç¼ºå°‘ `src/` ç›®å½•å’Œæºä»£ç æ–‡ä»¶

**é”™è¯¯ä¿¡æ¯**:
```
[16:15:48] [ERROR] æ„å»ºå¤±è´¥: BuilderError: Rollup æ„å»ºå¤±è´¥: æœªæ‰¾åˆ°åŒ¹é…çš„è¾“å…¥æ–‡ä»¶
```

**å½±å“çš„åŒ…**:
- `packages/engine/packages/alpinejs/` - ç¼ºå°‘ src/
- `packages/engine/packages/astro/` - ç¼ºå°‘ src/

**è§£å†³æ–¹æ¡ˆ**:
1. **æ–¹æ¡ˆ A (æ¨è)**: ä¸ºè¿™ä¸¤ä¸ªåŒ…åˆ›å»ºåŸºæœ¬çš„æºä»£ç å®ç°
2. **æ–¹æ¡ˆ B (ä¸´æ—¶)**: ä»æ„å»ºè„šæœ¬ä¸­æ’é™¤è¿™ä¸¤ä¸ªåŒ…

### 2. å…¶ä»–4ä¸ªåŒ…ä¹Ÿç¼ºå°‘æºä»£ç 

è™½ç„¶å·²ä»ä¸»åŒ…ä¾èµ–ä¸­ç§»é™¤,ä½†è¿™äº›åŒ…ä»ç„¶å­˜åœ¨äºä»“åº“ä¸­:
- `packages/engine/packages/nextjs/` - ç¼ºå°‘ src/
- `packages/engine/packages/nuxtjs/` - ç¼ºå°‘ src/
- `packages/engine/packages/remix/` - ç¼ºå°‘ src/
- `packages/engine/packages/sveltekit/` - ç¼ºå°‘ src/

**å»ºè®®**: 
- å¦‚æœè®¡åˆ’å®ç°è¿™äº›åŒ…,åº”è¯¥åˆ›å»ºæºä»£ç 
- å¦‚æœä¸è®¡åˆ’å®ç°,åº”è¯¥åˆ é™¤è¿™äº›åŒ…ç›®å½•

---

## ğŸ“Š åŒ…çŠ¶æ€æ€»ç»“

### å®Œæ•´å®ç°çš„åŒ… (9ä¸ª)

| åŒ…å | ç‰ˆæœ¬ | çŠ¶æ€ | æ„å»º |
|------|------|------|------|
| @ldesign/engine-core | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-react | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-vue | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-angular | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-solid | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-svelte | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-preact | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-lit | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |
| @ldesign/engine-qwik | 0.2.0 | âœ… å®Œæ•´ | âœ… æˆåŠŸ |

### ç¼ºå°‘æºä»£ç çš„åŒ… (6ä¸ª)

| åŒ…å | ç‰ˆæœ¬ | çŠ¶æ€ | æ„å»º | å·²ä»ä¸»åŒ…ç§»é™¤ |
|------|------|------|------|-------------|
| @ldesign/engine-alpinejs | 0.1.0 | âŒ ç¼ºå°‘ src/ | âŒ å¤±è´¥ | âœ… æ˜¯ |
| @ldesign/engine-astro | 0.1.0 | âŒ ç¼ºå°‘ src/ | âŒ å¤±è´¥ | âœ… æ˜¯ |
| @ldesign/engine-nextjs | 0.1.0 | âŒ ç¼ºå°‘ src/ | âš ï¸ æœªæ„å»º | âœ… æ˜¯ |
| @ldesign/engine-nuxtjs | 0.1.0 | âŒ ç¼ºå°‘ src/ | âš ï¸ æœªæ„å»º | âœ… æ˜¯ |
| @ldesign/engine-remix | 0.1.0 | âŒ ç¼ºå°‘ src/ | âš ï¸ æœªæ„å»º | âœ… æ˜¯ |
| @ldesign/engine-sveltekit | 0.1.0 | âŒ ç¼ºå°‘ src/ | âš ï¸ æœªæ„å»º | âœ… æ˜¯ |

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³è¡ŒåŠ¨ (ä»Šå¤©)

1. **å†³å®šå¦‚ä½•å¤„ç†ç¼ºå°‘æºä»£ç çš„6ä¸ªåŒ…**
   - é€‰é¡¹ A: å®ç°è¿™äº›åŒ…çš„åŸºæœ¬åŠŸèƒ½
   - é€‰é¡¹ B: åˆ é™¤è¿™äº›åŒ…ç›®å½•
   - é€‰é¡¹ C: ä¿ç•™ä½†ä»æ„å»ºä¸­æ’é™¤

2. **ä¿®å¤ alpinejs å’Œ astro çš„æ„å»ºå¤±è´¥**
   - å¦‚æœé€‰æ‹©å®ç°,åˆ›å»ºåŸºæœ¬çš„ src/index.ts
   - å¦‚æœé€‰æ‹©åˆ é™¤,ç§»é™¤åŒ…ç›®å½•
   - å¦‚æœé€‰æ‹©ä¿ç•™,ä¿®æ”¹æ„å»ºè„šæœ¬æ’é™¤å®ƒä»¬

### çŸ­æœŸç›®æ ‡ (æœ¬å‘¨)

3. **éªŒè¯æ‰€æœ‰å®Œæ•´åŒ…çš„æ„å»º**
   ```bash
   cd packages/engine
   pnpm -r --filter './packages/core' --filter './packages/react' --filter './packages/vue' --filter './packages/angular' --filter './packages/solid' --filter './packages/svelte' --filter './packages/preact' --filter './packages/lit' --filter './packages/qwik' build
   ```

4. **æµ‹è¯•ç¤ºä¾‹é¡¹ç›®**
   - éªŒè¯æ¯ä¸ªå®Œæ•´åŒ…çš„ example é¡¹ç›®èƒ½å¦æ­£å¸¸è¿è¡Œ
   - æµ‹è¯• devã€buildã€preview å‘½ä»¤

### ä¸­æœŸç›®æ ‡ (ä¸‹å‘¨)

5. **ç»Ÿä¸€æ„å»ºå·¥å…·**
   - å°†æ‰€æœ‰åŒ…ç»Ÿä¸€ä½¿ç”¨ `@ldesign/builder`
   - æˆ–ç»Ÿä¸€ä½¿ç”¨ `tsup`

6. **æ•´ç†æ–‡æ¡£**
   - åˆ é™¤é‡å¤çš„æ–‡æ¡£æ–‡ä»¶
   - æ•´åˆåˆ° docs/ ç›®å½•

### é•¿æœŸç›®æ ‡ (æœ¬æœˆ)

7. **å®Œå–„æµ‹è¯•è¦†ç›–**
   - ä¸ºæ ¸å¿ƒåŒ…æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•
   - ä¸ºé€‚é…å™¨åŒ…æ·»åŠ é›†æˆæµ‹è¯•

8. **æ·»åŠ  CI/CD**
   - åˆ›å»º GitHub Actions å·¥ä½œæµ
   - è‡ªåŠ¨åŒ–æµ‹è¯•å’Œæ„å»º

---

## ğŸ“ å»ºè®®çš„æ„å»ºå‘½ä»¤

### æ„å»ºæ‰€æœ‰å®Œæ•´çš„åŒ…

```bash
cd packages/engine

# åªæ„å»ºæœ‰æºä»£ç çš„åŒ…
pnpm -r --filter './packages/core' \
       --filter './packages/react' \
       --filter './packages/vue' \
       --filter './packages/angular' \
       --filter './packages/solid' \
       --filter './packages/svelte' \
       --filter './packages/preact' \
       --filter './packages/lit' \
       --filter './packages/qwik' \
       build
```

### æ„å»ºå•ä¸ªåŒ…

```bash
# æ„å»ºæ ¸å¿ƒåŒ…
cd packages/engine/packages/core
pnpm build

# æ„å»º React é€‚é…å™¨
cd packages/engine/packages/react
pnpm build
```

---

## ğŸ” ä»£ç è´¨é‡è¯„ä¼°

### æ ¸å¿ƒåŒ… (@ldesign/engine-core)

**è¯„åˆ†**: â­â­â­â­â­ (5/5)

**ä¼˜ç‚¹**:
- æ¶æ„è®¾è®¡ä¼˜ç§€,èŒè´£åˆ†ç¦»æ¸…æ™°
- å®Œå–„çš„ç±»å‹å®šä¹‰
- æ¡†æ¶æ— å…³çš„è®¾è®¡
- è‰¯å¥½çš„é€‚é…å™¨æ¨¡å¼

**å»ºè®®**:
- æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•
- å®Œå–„ API æ–‡æ¡£

### ä¸»è¦æ¡†æ¶é€‚é…åŒ…

**è¯„åˆ†**: â­â­â­â­ (4/5)

**ä¼˜ç‚¹**:
- API è®¾è®¡ä¸€è‡´
- éµå¾ªå„æ¡†æ¶çš„æœ€ä½³å®è·µ
- ç±»å‹å®šä¹‰å®Œå–„

**å»ºè®®**:
- æ·»åŠ é›†æˆæµ‹è¯•
- å®Œå–„ä½¿ç”¨ç¤ºä¾‹

---

## ğŸ“ˆ é¡¹ç›®å¥åº·åº¦

| æŒ‡æ ‡ | çŠ¶æ€ | è¯„åˆ† |
|------|------|------|
| ä»£ç è´¨é‡ | è‰¯å¥½ | â­â­â­â­ |
| æ¶æ„è®¾è®¡ | ä¼˜ç§€ | â­â­â­â­â­ |
| API ä¸€è‡´æ€§ | è‰¯å¥½ | â­â­â­â­ |
| å®Œæ•´æ€§ | ä¸­ç­‰ | â­â­â­ |
| æ–‡æ¡£è´¨é‡ | ä¸­ç­‰ | â­â­â­ |
| æµ‹è¯•è¦†ç›– | ä¸è¶³ | â­â­ |
| **æ€»ä½“è¯„åˆ†** | **è‰¯å¥½** | **â­â­â­â­** |

---

## ğŸ’¡ å…³é”®å†³ç­–ç‚¹

### å†³ç­– 1: å¦‚ä½•å¤„ç†ç¼ºå°‘æºä»£ç çš„6ä¸ªåŒ…?

**é€‰é¡¹ A: å®ç°è¿™äº›åŒ…** (æ¨è)
- ä¼˜ç‚¹: å®Œæ•´çš„æ¡†æ¶æ”¯æŒ,ç”¨æˆ·ä½“éªŒå¥½
- ç¼ºç‚¹: éœ€è¦æŠ•å…¥å¼€å‘æ—¶é—´
- å·¥ä½œé‡: 12-24 å°æ—¶

**é€‰é¡¹ B: åˆ é™¤è¿™äº›åŒ…**
- ä¼˜ç‚¹: å¿«é€Ÿæ¸…ç†,å‡å°‘ç»´æŠ¤è´Ÿæ‹…
- ç¼ºç‚¹: åŠŸèƒ½ä¸å®Œæ•´
- å·¥ä½œé‡: 30 åˆ†é’Ÿ

**é€‰é¡¹ C: ä¿ç•™ä½†æ ‡è®°ä¸º WIP**
- ä¼˜ç‚¹: ä¿ç•™æœªæ¥å®ç°çš„å¯èƒ½æ€§
- ç¼ºç‚¹: ä»“åº“ä¸­æœ‰æœªå®Œæˆçš„ä»£ç 
- å·¥ä½œé‡: 1 å°æ—¶

**å»ºè®®**: é€‰æ‹©é€‰é¡¹ B (åˆ é™¤),ç„¶ååœ¨éœ€è¦æ—¶é‡æ–°å®ç°

### å†³ç­– 2: æ„å»ºå·¥å…·ç»Ÿä¸€?

**é€‰é¡¹ A: ç»Ÿä¸€ä½¿ç”¨ @ldesign/builder** (æ¨è)
- ä¼˜ç‚¹: é…ç½®ç»Ÿä¸€,ç»´æŠ¤ç®€å•
- ç¼ºç‚¹: éœ€è¦è¿ç§»éƒ¨åˆ†åŒ…
- å·¥ä½œé‡: 1-2 å°æ—¶

**é€‰é¡¹ B: ç»Ÿä¸€ä½¿ç”¨ tsup**
- ä¼˜ç‚¹: æ›´ç®€å•çš„é…ç½®
- ç¼ºç‚¹: éœ€è¦è¿ç§»å¤§éƒ¨åˆ†åŒ…
- å·¥ä½œé‡: 3-4 å°æ—¶

**å»ºè®®**: é€‰æ‹©é€‰é¡¹ A (ç»Ÿä¸€ä½¿ç”¨ @ldesign/builder)

---

## ğŸ“ éœ€è¦çš„è¾“å…¥

è¯·å†³å®šä»¥ä¸‹äº‹é¡¹:

1. â“ æ˜¯å¦è¦å®ç°ç¼ºå°‘æºä»£ç çš„6ä¸ªæ¡†æ¶é€‚é…åŒ…?
2. â“ å¦‚æœä¸å®ç°,æ˜¯åˆ é™¤è¿˜æ˜¯ä¿ç•™è¿™äº›åŒ…ç›®å½•?
3. â“ æ˜¯å¦è¦ç»Ÿä¸€æ„å»ºå·¥å…·?å¦‚æœæ˜¯,ä½¿ç”¨å“ªä¸ªå·¥å…·?
4. â“ æ˜¯å¦è¦ç«‹å³æµ‹è¯•æ‰€æœ‰ example é¡¹ç›®?

---

**æŠ¥å‘Šç»“æŸ**

